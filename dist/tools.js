function getBackColor(){return 2*fxrand()<1?(bColor=100,"White 白色"):(bColor=0,"Black 黑色")}function getFlowerNum(){return gNums=parseInt(3*fxrand()+1),gNums}function getPalleteStyle(){for(var n=0,t=0;t<gNums;t++){paletteIndex[t]=parseInt(6*fxrand());var e=paletteIndex[t];5!=paletteIndex[t]&&4!=paletteIndex[t]||(e=4),n=10*n+(e+1)}return n<10?n+"00":n<100?n+"0":""+n}function getCanvasStyle(){return pColor=parseInt(360*fxrand()),parseInt(pColor/52)+1}function roundedPoly(n,t,e){var a,r,l,o,s,x,y,u,h,i,c,f,d,M,I,g,p,P,C=function(n,t,e){e.x=t.x-n.x,e.y=t.y-n.y,e.len=Math.sqrt(e.x*e.x+e.y*e.y),e.nx=e.x/e.len,e.ny=e.y/e.len,e.ang=Math.atan2(e.ny,e.nx)};for(P=e,u={},h={},s=t[(o=t.length)-1],a=0;a<o;a++)x=t[a%o],y=t[(a+1)%o],C(x,s,u),C(x,y,h),i=u.nx*h.ny-u.ny*h.nx,c=u.nx*h.nx-u.ny*-h.ny,M=Math.asin(i<-1?-1:i>1?1:i),f=1,d=!1,c<0?M<0?M=Math.PI+M:(M=Math.PI-M,f=-1,d=!0):M>0&&(f=-1,d=!0),P=void 0!==x.radius?x.radius:e,I=M/2,(p=Math.abs(Math.cos(I)*P/Math.sin(I)))>Math.min(u.len/2,h.len/2)?(p=Math.min(u.len/2,h.len/2),g=Math.abs(p*Math.sin(I)/Math.cos(I))):g=P,r=x.x+h.nx*p,l=x.y+h.ny*p,r+=-h.ny*g*f,l+=h.nx*g*f,n.arc(r,l,g,u.ang+Math.PI/2*f,h.ang-Math.PI/2*f,d),s=x,x=y;n.closePath()}function createPalette(n){let t=n.lastIndexOf("/"),e=n.slice(t+1).split("-");for(let n=0;n<e.length;n++)e[n]="#"+e[n];return e}function keyPressed(){"s"===key.toLowerCase()&&save()," "===key&&reset()}